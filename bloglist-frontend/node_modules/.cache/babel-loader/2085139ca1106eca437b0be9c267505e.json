{"ast":null,"code":"var _jsxFileName = \"/home/neutrino/fsopen/part7/bloglist-frontend/src/components/Blog.js\",\n    _s = $RefreshSig$();\n\n/** @format */\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport AddComment from './AddComment';\nimport Togglable from './Togglable';\nimport { useRef } from 'react';\nimport FavoriteIcon from '@mui/icons-material/Favorite';\nimport { IconButton } from '@mui/material';\nimport Button from '@mui/material/Button';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Comments = _ref => {\n  let {\n    comments\n  } = _ref;\n  if (comments.length === 0) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      paddingLeft: 10\n    },\n    children: \"no comments on this blog yet\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 13,\n    columnNumber: 12\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      paddingLeft: 10\n    },\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: comments.map(comment => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: comment.text\n      }, comment.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 19,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 16,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Comments;\n\nconst Blog = _ref2 => {\n  _s();\n\n  let {\n    updateBlog,\n    deleteBlog,\n    addComment\n  } = _ref2;\n  const blogs = useSelector(state => state.blogs);\n  const navigate = useNavigate();\n  const commentRef = useRef();\n  const id = useParams().id;\n  const blog = blogs.find(b => b.id === id);\n  const blogUser = blog.user.name;\n  const comments = blog.comments;\n\n  const handleUpdateBlog = () => {\n    const blogObject = {\n      title: blog.title,\n      author: blog.author,\n      url: blog.url,\n      likes: blog.likes + 1,\n      comments: blog.comments\n    };\n    updateBlog(blogObject, blog.id);\n  };\n\n  const handleDeleteBlog = () => {\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}`)) {\n      deleteBlog(blog.id);\n      navigate('/'); // handleVisible() // to hide the blog after deletion\n    }\n  };\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 10,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5\n  };\n\n  const hide = () => {\n    commentRef.current.toggleVisibility();\n  };\n\n  const handleNewComment = async comment => {\n    commentRef.current.toggleVisibility();\n    addComment(blog.id, comment);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: blogStyle,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [blog.title, \" \", blog.author]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: blog.url,\n      target: \"_blank\",\n      rel: \"noreferrer\",\n      children: blog.url\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [blog.likes, \" likes\", /*#__PURE__*/_jsxDEV(IconButton, {\n        onClick: handleUpdateBlog,\n        color: \"like\",\n        children: /*#__PURE__*/_jsxDEV(FavoriteIcon, {\n          sx: {\n            color: 'red'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        marginTop: '1rem'\n      },\n      children: [\"added by \", blogUser]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: /*#__PURE__*/_jsxDEV(\"u\", {\n          children: \"Comments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Comments, {\n        comments: comments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Togglable, {\n        buttonLabel: \"add a comment\",\n        ref: commentRef,\n        children: /*#__PURE__*/_jsxDEV(AddComment, {\n          addComment: handleNewComment,\n          hide: hide\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      color: \"error\",\n      onClick: handleDeleteBlog,\n      sx: {\n        marginTop: '2rem',\n        marginBottom: 2,\n        marginLeft: 'auto'\n      },\n      children: \"Remove\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Blog, \"00HtBjnXihbqnNwm39P26tozSn0=\", false, function () {\n  return [useSelector, useNavigate, useParams];\n});\n\n_c2 = Blog;\nexport default Blog;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Comments\");\n$RefreshReg$(_c2, \"Blog\");","map":{"version":3,"sources":["/home/neutrino/fsopen/part7/bloglist-frontend/src/components/Blog.js"],"names":["useParams","useNavigate","useSelector","AddComment","Togglable","useRef","FavoriteIcon","IconButton","Button","Comments","comments","length","paddingLeft","map","comment","text","id","Blog","updateBlog","deleteBlog","addComment","blogs","state","navigate","commentRef","blog","find","b","blogUser","user","name","handleUpdateBlog","blogObject","title","author","url","likes","handleDeleteBlog","window","confirm","blogStyle","paddingTop","border","borderWidth","marginBottom","hide","current","toggleVisibility","handleNewComment","color","marginTop","marginLeft"],"mappings":"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","sourcesContent":["/** @format */\nimport { useParams, useNavigate } from 'react-router-dom'\nimport { useSelector } from 'react-redux'\nimport AddComment from './AddComment'\nimport Togglable from './Togglable'\nimport { useRef } from 'react'\nimport FavoriteIcon from '@mui/icons-material/Favorite'\nimport { IconButton } from '@mui/material'\nimport Button from '@mui/material/Button'\n\nconst Comments = ({ comments }) => {\n  if (comments.length === 0)\n    return <p style={{ paddingLeft: 10 }}>no comments on this blog yet</p>\n\n  return (\n    <div style={{ paddingLeft: 10 }}>\n      <ul>\n        {comments.map((comment) => (\n          <li key={comment.id}>{comment.text}</li>\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nconst Blog = ({ updateBlog, deleteBlog, addComment }) => {\n  const blogs = useSelector((state) => state.blogs)\n  const navigate = useNavigate()\n  const commentRef = useRef()\n\n  const id = useParams().id\n\n  const blog = blogs.find((b) => b.id === id)\n  const blogUser = blog.user.name\n  const comments = blog.comments\n\n  const handleUpdateBlog = () => {\n    const blogObject = {\n      title: blog.title,\n      author: blog.author,\n      url: blog.url,\n      likes: blog.likes + 1,\n      comments: blog.comments,\n    }\n    updateBlog(blogObject, blog.id)\n  }\n\n  const handleDeleteBlog = () => {\n    if (window.confirm(`Remove blog ${blog.title} by ${blog.author}`)) {\n      deleteBlog(blog.id)\n      navigate('/')\n      // handleVisible() // to hide the blog after deletion\n    }\n  }\n\n  const blogStyle = {\n    paddingTop: 10,\n    paddingLeft: 10,\n    border: 'solid',\n    borderWidth: 1,\n    marginBottom: 5,\n  }\n\n  const hide = () => {\n    commentRef.current.toggleVisibility()\n  }\n\n  const handleNewComment = async (comment) => {\n    commentRef.current.toggleVisibility()\n    addComment(blog.id, comment)\n  }\n\n  return (\n    <div style={blogStyle}>\n      <h1>\n        {blog.title} {blog.author}\n      </h1>\n      <a href={blog.url} target=\"_blank\" rel=\"noreferrer\">\n        {blog.url}\n      </a>\n      <p>\n        {blog.likes} likes\n        <IconButton onClick={handleUpdateBlog} color=\"like\">\n          <FavoriteIcon sx={{ color: 'red' }} />\n        </IconButton>\n      </p>\n      <p style={{ marginTop: '1rem' }}>added by {blogUser}</p>\n      <div>\n        <h3>\n          <u>Comments</u>\n        </h3>\n        <Comments comments={comments} />\n      </div>\n      <div>\n        <Togglable buttonLabel=\"add a comment\" ref={commentRef}>\n          <AddComment addComment={handleNewComment} hide={hide} />\n        </Togglable>\n      </div>\n      <Button\n        variant=\"contained\"\n        color=\"error\"\n        onClick={handleDeleteBlog}\n        sx={{ marginTop: '2rem', marginBottom: 2, marginLeft: 'auto' }}\n      >\n        Remove\n      </Button>\n    </div>\n  )\n}\n\nexport default Blog\n"]},"metadata":{},"sourceType":"module"}